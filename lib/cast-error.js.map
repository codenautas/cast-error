{"version":3,"file":"cast-error.js","sourceRoot":"","sources":["../src/cast-error.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IAEA;QAAiC,+BAAK;QAGlC,qBAAY,OAAc;YAA1B,YACI,kBAAM,OAAO,CAAC,SAEjB;YADG,KAAI,CAAC,IAAI,GAAG,aAAa,CAAC;;QAC9B,CAAC;QACL,kBAAC;IAAD,CAAC,AAPD,CAAiC,KAAK,GAOrC;IAPY,kCAAW;IASxB,IAAI,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;IAEhC,SAAgB,cAAc,CAAC,CAAsB;QACjD,WAAW,GAAG,CAAC,CAAC;IACpB,CAAC;IAFD,wCAEC;IAED,SAAgB,QAAQ,CAAgC,GAAW,EAAE,WAA2B;QAC5F,IAAG,GAAG,YAAY,KAAK,EAAC;YACpB,IAAG,WAAW,IAAI,IAAI,IAAI,CAAC,CAAC,GAAG,YAAY,WAAW,CAAC;gBAAE,WAAW,CAAC,kBAAU,WAAW,CAAC,IAAI,mBAAe,EAAC,GAAG,CAAC,CAAC;YACpH,OAAO,GAAQ,CAAC;SACnB;QACD,WAAW,CAAC,yBAAyB,EAAC,GAAG,CAAC,CAAC;QAC3C,IAAI,OAAO,GAAU,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CACvD,OAAO,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3B,aAAa;QACb,OAAO,GAAG,IAAI,QAAQ,IAAI,SAAS,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CACjE,CACJ,CAAC,QAAQ,EAAE,CAAC;QACb,aAAa;QACb,OAAO,IAAI,CAAC,WAAW,IAAE,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC;IAC7C,CAAC;IAdD,4BAcC;IAED,SAAgB,UAAU,CAAgC,GAAW,EAAE,WAA2B;QAC9F,WAAW,CAAC,iBAAiB,EAAC,GAAG,CAAC,CAAC;QACnC,OAAO,QAAQ,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IACtC,CAAC;IAHD,gCAGC","sourcesContent":["export type Constructor<T> = new(...args: any[]) => T;\r\n\r\nexport class SystemError extends Error{\r\n    code?:string\r\n    cause?:Error\r\n    constructor(message:string) {\r\n        super(message)\r\n        this.name = 'SystemError';\r\n    }\r\n}\r\n\r\nvar logFunction = console.error;\r\n\r\nexport function setLogFunction(f:typeof console.error){\r\n    logFunction = f;\r\n}\r\n\r\nexport function expected<T extends Error = SystemError>(err:unknown, constructor?:Constructor<T>):T{\r\n    if(err instanceof Error){ \r\n        if(constructor != null && !(err instanceof constructor)) logFunction(`not a \"${constructor.name}\" in a catch:`,err);\r\n        return err as T;\r\n    }\r\n    logFunction('not an Error in a catch',err);\r\n    var message:string = err == null ? \"null error in catch\" : ( \r\n        typeof err == \"string\" ? err : (\r\n            // @ts-ignore\r\n            typeof err == \"object\" && \"message\" in err ? err.message : err\r\n        )\r\n    ).toString();\r\n    // @ts-ignore\r\n    return new (constructor||Error)(message);\r\n}\r\n\r\nexport function unexpected<T extends Error = SystemError>(err:unknown, constructor?:Constructor<T>):T{\r\n    logFunction('unexpectedError',err);\r\n    return expected(err, constructor);\r\n}\r\n"]}